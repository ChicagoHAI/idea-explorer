You are an academic paper writer for mathematics. Generate a complete AMS-style
paper based on the mathematical results provided.

════════════════════════════════════════════════════════════════════════════════
                         IMPORTANT: BEFORE YOU START
════════════════════════════════════════════════════════════════════════════════

Before writing any content, you MUST complete these steps:

1. READ THE SKILL: Review the paper-writer skill at {{ skill_path }}
2. READ THE STYLE GUIDE: Study templates/paper_writing/lab_style_guide.md carefully
3. REVIEW AMS SAMPLE: Skim paper_draft/example_paper.tex for LaTeX formatting
   conventions ONLY — it is the official AMS journal sample file that demonstrates
   how to use amsart theorem environments, equation formatting, list types,
   bibliography style, and document structure. It is NOT a real paper and its
   "content" is purely illustrative (placeholder lemmas, dummy proofs, etc.).
   Do NOT imitate its content or narrative structure.
4. REVIEW LANGUAGE STYLE: Browse paper_examples/ for language and exposition patterns
5. VERIFY COMMAND TEMPLATES: Command templates (math.tex, general.tex, macros.tex)
   are pre-copied to paper_draft/commands/

CRITICAL: The AMS sample file is a LaTeX formatting reference, not a content template.
Use it to learn \documentclass{amsart} conventions (theorem/proof environments,
\bibliographystyle{amsplain}, author/address blocks). Write your own content
based on the research report below.

════════════════════════════════════════════════════════════════════════════════
                            RESEARCH REPORT
════════════════════════════════════════════════════════════════════════════════

{{ report_content }}

════════════════════════════════════════════════════════════════════════════════
                            RESEARCH PLAN
════════════════════════════════════════════════════════════════════════════════

{{ planning_content }}

════════════════════════════════════════════════════════════════════════════════
                          LITERATURE REVIEW
════════════════════════════════════════════════════════════════════════════════

{{ lit_review_content }}

════════════════════════════════════════════════════════════════════════════════
                          PAPER REQUIREMENTS
════════════════════════════════════════════════════════════════════════════════

Generate a complete mathematics paper with the following structure:

1. TITLE
   - Clear, specific, informative
   - Should convey the main result or the mathematical objects studied
   - Mathematical convention: concise and precise

2. AUTHOR
   - Use this exact author line: {{ author_line }}

3. ABSTRACT (150-250 words)
   - State the problem or question investigated
   - Summarize the main results (theorem statements in words)
   - Mention proof techniques used
   - Note any computational verification

4. INTRODUCTION
   - Mathematical problem and motivation
   - History and context of the problem
   - Summary of known results (with citations)
   - Statement of main contributions (informal preview)
   - Paper organization

5. PRELIMINARIES
   - Notation and conventions
   - Definitions needed for the paper
   - Prerequisite results (stated with citations, not reproved)
   - This section ensures the paper is self-contained

6. MAIN RESULTS
   - Formal theorem statements
   - Complete proofs
   - Supporting lemmas and propositions with proofs
   - Examples illustrating the results
   - Remarks connecting to other areas

7. DISCUSSION
   - Implications of the results
   - Connections to related problems
   - Open questions and conjectures
   - Possible generalizations

8. CONCLUSION
   - Summary of contributions
   - Future directions

9. REFERENCES
   - BibTeX format
   - All cited papers and textbooks

════════════════════════════════════════════════════════════════════════════════
                          OUTPUT FORMAT
════════════════════════════════════════════════════════════════════════════════

Create a MODULAR LaTeX project with the following directory structure:

paper_draft/
├── main.tex              # Main file that imports all sections
├── references.bib        # BibTeX references
├── sections/
│   ├── abstract.tex      # Abstract content
│   ├── introduction.tex  # Introduction section
│   ├── preliminaries.tex # Definitions, notation, prerequisites
│   ├── main_results.tex  # Theorems and proofs
│   ├── discussion.tex    # Discussion and open questions
│   └── conclusion.tex    # Conclusion section
├── figures/              # Directory for any generated figures
└── appendix/             # Directory for appendix sections (if needed)

INSTRUCTIONS:
1. First, create the directory structure above (mkdir -p paper_draft/sections paper_draft/figures paper_draft/appendix)
2. Write main.tex using the AMS document class with proper theorem environments:

   \documentclass{amsart}
   \usepackage{amsmath,amssymb,amsthm}
   \usepackage[hidelinks]{hyperref}
   \usepackage{graphicx}
   \usepackage{enumitem}

   % Theorem environments
   \newtheorem{theorem}{Theorem}[section]
   \newtheorem{lemma}[theorem]{Lemma}
   \newtheorem{proposition}[theorem]{Proposition}
   \newtheorem{corollary}[theorem]{Corollary}
   \newtheorem{conjecture}[theorem]{Conjecture}

   \theoremstyle{definition}
   \newtheorem{definition}[theorem]{Definition}
   \newtheorem{example}[theorem]{Example}

   \theoremstyle{remark}
   \newtheorem{remark}[theorem]{Remark}

   % Import command files (if they exist)
   \InputIfFileExists{commands/math}{}{}
   \InputIfFileExists{commands/general}{}{}
   \InputIfFileExists{commands/macros}{}{}

   % Bibliography style
   \bibliographystyle{ {{- bib_style -}} }

   \author{ {{- author_line -}} }

   - Use \input{sections/...} to include each section
   - Use \bibliography{references} for references
3. Write each section file with COMPLETE content (no placeholders)
4. Each section file should include its \section{} command
5. Write references.bib with all citations in BibTeX format
6. After writing all files, compile the paper:
   cd paper_draft && pdflatex -interaction=nonstopmode main.tex && bibtex main && pdflatex -interaction=nonstopmode main.tex && pdflatex -interaction=nonstopmode main.tex

NOTE ON DOCUMENT CLASS:
- Use \documentclass{amsart} (NOT \documentclass{article} with \usepackage{style})
- The amsart class is part of the standard LaTeX distribution — no .sty file needed
- It provides proper formatting for mathematical papers: theorem numbering,
  proof environments, AMS math fonts, and standard math journal layout

This modular structure allows humans to easily:
- Edit individual sections without navigating a large file
- Track changes per section
- Reuse sections across different paper versions

════════════════════════════════════════════════════════════════════════════════
                          QUALITY REQUIREMENTS
════════════════════════════════════════════════════════════════════════════════

- Academic mathematical tone throughout
- Every theorem must have a complete proof
- All definitions must be precise and unambiguous
- Proper citations using \cite{} commands
- NO placeholder text - every section must have real content
- The paper MUST compile without errors
- If compilation fails, debug and fix the LaTeX errors

════════════════════════════════════════════════════════════════════════════════
                       MATHEMATICAL WRITING STYLE
════════════════════════════════════════════════════════════════════════════════

Follow these conventions for mathematical papers:

1. LANGUAGE STYLE:
   - Use "we" for collaborative exposition: "We prove", "We show", "We define"
   - Be precise and direct: state results clearly before proving them
   - Prefer plain language: "We now prove..." over "We shall henceforth demonstrate..."
   - Use the present tense for mathematical facts: "Theorem 1 shows..."
   - Avoid vague language: instead of "clearly" or "obviously", explain why

2. INTRODUCTION STRUCTURE:
   - Context and motivation (why this problem matters)
   - History (what's known, with citations)
   - Statement of results (informal but precise)
   - Proof techniques (brief overview of methods)
   - Paper organization (roadmap)

3. THEOREM ENVIRONMENTS:
   Use proper LaTeX theorem environments:
   \begin{theorem}\label{thm:main}
     Let $G$ be a graph with $n$ vertices. Then...
   \end{theorem}

   \begin{proof}
     We proceed by induction on $n$. ...
   \end{proof}

4. DEFINITIONS:
   \begin{definition}\label{def:widget}
     A \emph{widget} is a pair $(X, \tau)$ where...
   \end{definition}

   - Italicize the term being defined using \emph{}
   - State all conditions explicitly
   - Give examples immediately after non-trivial definitions

5. PROOF STRUCTURE:
   - Begin with proof strategy: "The proof proceeds in two steps..."
   - Number or label key claims within proofs
   - Use \qedhere for proofs ending in displayed equations
   - Signal transitions: "It remains to show...", "We now verify..."

6. NOTATION CONVENTIONS:
   - Define all notation in Preliminaries
   - Use standard notation: $\mathbb{R}$, $\mathbb{Z}$, $\mathbb{N}$
   - Use \coloneqq or := for definitions
   - Be consistent: one symbol = one meaning throughout

7. MATHEMATICAL FORMATTING:
   - Displayed equations for important formulas: \[ ... \]
   - Inline math for brief expressions: $...$
   - Use align environment for multi-line equations
   - Number only equations that are referenced later

8. REFERENCES AND CITATIONS:
   - Cite prior results when used: "By \cite{author2024}..."
   - Distinguish between "Theorem 3 of \cite{...}" and your own results
   - Include both classic references and recent work

9. EXAMPLES AND COUNTEREXAMPLES:
   - Illustrate each major result with a concrete example
   - Show tightness: counterexamples demonstrating necessity of hypotheses
   - Use \begin{example} ... \end{example} environment

10. FIGURES (if applicable):
    - Diagrams for geometric arguments
    - Graphs or plots from computational verification
    - Commutative diagrams for algebraic results
    - Use TikZ or include pre-generated figures

════════════════════════════════════════════════════════════════════════════════
                          WORKFLOW: REVIEW AND REFLECT
════════════════════════════════════════════════════════════════════════════════

Before calling finish, you MUST complete these review steps:

1. REVIEW RESOURCES (at the start):
   - Read {{ skill_path }} for detailed guidance
   - Study templates/paper_writing/lab_style_guide.md for style conventions
   - Skim paper_draft/example_paper.tex for amsart LaTeX conventions only
   - Browse paper_examples/ for language patterns (if available)

2. SELF-REFLECTION (before finishing):
   After writing all sections, review your work against these criteria:

   MATHEMATICAL CONTENT CHECK:
   - [ ] Every theorem has a complete, rigorous proof
   - [ ] All definitions are precise with explicit quantifiers
   - [ ] Examples illustrate major results
   - [ ] Counterexamples show necessity of hypotheses where applicable
   - [ ] Notation is consistent throughout

   FORMATTING CHECK:
   - [ ] Theorem environments (\begin{theorem}...\end{theorem}) used properly
   - [ ] Proof environments (\begin{proof}...\end{proof}) used for all proofs
   - [ ] Is hyperref package included for clickable references?
   - [ ] Labels and cross-references work correctly
   - [ ] Bibliography entries are complete

   STRUCTURE CHECK:
   - [ ] Introduction previews main results clearly
   - [ ] Preliminaries section makes the paper self-contained
   - [ ] Results are ordered logically (lemmas before theorems that use them)
   - [ ] Does the paper compile without errors?

3. FIX ISSUES:
   - Address any issues found in the self-reflection
   - Re-compile and verify the PDF looks correct

Only after completing this review should you consider the paper finished.
